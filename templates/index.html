<!-- templates/index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Picture Comparison</title>
</head>
<body>

    <h1>Picture Comparison</h1>

    <!-- Add Reset Elo Ratings button -->
    <button onclick="resetEloRatings()">Reset Elo Ratings</button>

    <div style="display: flex; flex-direction: column; align-items: center;">
        <div onclick="chooseWinner('{{ picture1.id }}', '{{ picture2.id }}')" style="cursor: pointer;">
            <img src="{{ url_for('static', filename='uploads/' + picture1.filename) }}" alt="Picture 1" style="max-width: 400px; max-height: 400px;">
        </div>
        <div onclick="chooseWinner('{{ picture2.id }}', '{{ picture1.id }}')" style="cursor: pointer;">
            <img src="{{ url_for('static', filename='uploads/' + picture2.filename) }}" alt="Picture 2" style="max-width: 400px; max-height: 400px;">
        </div>
    </div>

    <script>
        function chooseWinner(winnerId, loserId) {
            // Make an AJAX request to the server
            fetch('/update_elo', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ winner: winnerId, loser: loserId }),
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message); // Display a message from the server
                location.reload();   // Refresh the page after the update
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        function resetEloRatings() {
            // Make an AJAX request to reset Elo ratings
            fetch('/reset_elos', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ new_elo: 1500 }), // You can change the new Elo rating if needed
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message); // Display a message from the server
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    </script>    

</body>
</html>
